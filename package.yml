name       : rstudio
version    : 1.3.959
release    : 17
source     :
    - https://github.com/rstudio/rstudio/archive/v1.3.959.tar.gz : 5c89fe18e3d5ead0e7921c88e5fb42ed816823238e84135f5e9e3a364d35fcc1
license    : AGPL-3.0
component  : programming.ide
summary    : Integrated development environment (IDE) for R
description: |
    RStudio is an integrated development environment (IDE) for the R programming language.
builddeps  :
    - pkgconfig(gl)
    - pkgconfig(libR)
    - pkgconfig(Qt5Positioning)
    - pkgconfig(Qt5Quick)
    - pkgconfig(Qt5Sensors)
    - pkgconfig(Qt5Svg)
    - pkgconfig(Qt5WebChannel)
    - pkgconfig(Qt5WebEngine)
    - pkgconfig(Qt5XmlPatterns)
    - apache-ant
    - libboost-devel
    - shared-mime-info
    - xdg-utils
rundeps    :
    - r
setup      : |
    #Defeat build 'checks'
    cd dependencies/common
    install -d dictionaries libclang/{3.5,builtin-headers} mathjax-27 pandoc rmarkdown rsconnect
    cd ../..

    %cmake -DRSTUDIO_TARGET=Desktop \
           -DQT_QMAKE_EXECUTABLE=/usr/bin/qmake \
           -DCMAKE_INSTALL_PREFIX=/usr/share/rstudio \
           -DRSTUDIO_BOOST_SIGNALS_VERSION=2
build      : |
    %make
install    : |
    %make_install
    install -d -m 00755 $installdir/usr/bin
    ln -s /usr/share/rstudio/bin/rstudio $installdir/usr/bin/rstudio

    #Use system dictionaries
    rm -rf $installdir/usr/share/rstudio/resources/dictionaries
    ln -s /usr/share/hunspell $installdir/usr/share/rstudio/resources/dictionaries
    # Fix mimetype handlers by replacing desktop file
    install -Dm00644 $pkgfiles/rstudio.desktop $installdir/usr/share/applications/rstudio.desktop

